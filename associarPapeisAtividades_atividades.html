<html>
	<head>
		<title>IPM-PAF</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	</head>
	<body>
		<div class="container shadow"  >

			<div class="row align-items-left">
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="#">Home</a></li>
						<li class="breadcrumb-item"><a href="#">Associações</a></li>
						<li class="breadcrumb-item"><a href="#">Associar papéis</a></li>
						<li class="breadcrumb-item active" aria-current="page">Atividades</li>
					</ol>
				</nav>
			</div>
			<div class="row justify-content-center align-items-center">
				<div class="col-xs-12 ">
					<nav class="nav nav-tabs nav-fill">
						<p class="nav-item nav-link">Passo 1 - Seleccionar Papel</p>
						<p class="nav-item nav-link active">Passo 2 - Seleccionar actividade</p>
					</nav>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12 border w-100" >
					<br>						
					<div class="btn-toolbar">
						<div class="btn-group mr-2 ml-2">
							<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalFiltro">
							  Filtrar
							</button>
						</div>
						<div class="input-group">
							<div class="input-group-prepend">
								<div class="input-group-text" id="btnGroupAddon">&#x1F50D;</div>
							</div>
							<input type="text" class="form-control" placeholder="Pesquisar">
						</div>
					</div>

					<br>
					<div style="height:50%;overflow-y:scroll;overflow: auto;white-space: nowrap;" >
						<table  class="table table-striped table-bordered table-hover">
							<thead class="thead-light align-items-center">
								<tr>
									<th style="width: 10%">Id</th>
									<th style="width: 40%">Nome</th>
									<th style="width: 25%">Data Criação</th>
									<th style="width: 25%">Autor</th>
								</tr>
							</thead>
							<tbody>
							    <tr id="row1" onclick="atividadesGridClicked('row1')">
							      <td>1</td>
							      <td>Mark</td>
							      <td>Otto</td>
							      <td>Otto</td>
							    </tr>
							    <tr id="row2" onclick="atividadesGridClicked('row2')">
							      <td>2</td>
							      <td>Jacob</td>
							      <td>DD/MM/AAAA</td>
							      <td>Jacob</td>
							    </tr><tr id="row3" onclick="atividadesGridClicked('row3')">
							      <td>2</td>
							      <td>Jacob</td>
							      <td>DD/MM/AAAA</td>
							      <td>Jacob</td>
							    </tr>
							    <tr id="row4" onclick="atividadesGridClicked('row4')">
							      <td>2</td>
							      <td>Jacob</td>
							      <td>DD/MM/AAAA</td>
							      <td>Jacob</td>
							    </tr>
							    <tr id="row5" onclick="atividadesGridClicked('row5')">
							      <td>2</td>
							      <td>Jacob</td>
							      <td>DD/MM/AAAA</td>
							      <td>Jacob</td>
							    </tr>
							    <tr id="row5" onclick="atividadesGridClicked('row5')">
							      <td>2</td>
							      <td>Jacob</td>
							      <td>DD/MM/AAAA</td>
							      <td>Jacob</td>
							    </tr>
							    <tr id="row5" onclick="atividadesGridClicked('row5')">
							      <td>2</td>
							      <td>Jacob</td>
							      <td>DD/MM/AAAA</td>
							      <td>Jacob</td>
							    </tr>
							</tbody>
						</table>
					</div>	

					<br>
					<div class="row justify-content-around mt-3">
						<a href="associarPapeisAtividades_papeis.html">
							<button type="button" class="btn" >
								&lt; Retroceder
							</button>
						</a>
						
						<button id="next" type="button" onclick="nextPage()" class="btn btn-primary" data-toggle="modal" data-target="#ModalConfirmação">Associar</button>
					</div>
					<br>
				</div>
			</div>

		</div>

	<footer class="mt-3">
      <div class="row justify-content-around ">  
        <p>&copy; 2018 Interfaces Pessoa Máquina</p>   
        <p>Designed by Grupo3</p>
      </div>
    </footer>
    

	</body>
	<div class="modal fade" id="ModalFiltro" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Filtros</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      	<div class="container">
      		<div class="row">
      			<div class="col-sm-3 pl-0 pr-1">
	      			<select class="form-control">
				        <option value="1">Nome</option>
				        <option value="2">Data</option>
				    	<option value="3">Autor</option>
			    	</select>
		    	</div>
		    	<div class="col-sm-3 pl-0 pr-1">
			    	<select class="form-control">
				        <option value="1"></option>
				        <option value="2"></option>
				    	<option value="3"></option>
			    	</select>
			    </div>
			    <div class="col-sm-6 pl-1 pr-0">
			    	<input type="text" class="form-control">
			    </div>
      		</div>
      		<div class="row justify-content-center">
      			<button type="button" class="btn btn-primary">Adicionar Filtro</button>
      		</div>
      		<br>
      		<div class="row">
      			<table class="table table-striped table-bordered table-hover">
						<thead class="thead-light align-items-center">
							<tr>
								<th style="width: 10%"><input type="checkbox" ></th>
								<th style="width: 10%"></th>
								<th style="width: 80%">Descrição</th>
							</tr>
						</thead>
						<tbody class="align-items-center">
						    <tr>
						      <td><input type="checkbox" ></td>
						      <td>&#x1f5d1</td>
						      <td></td>
						    </tr>
						</tbody>
						<tbody class="align-items-center">
						    <tr>
						      <td><input type="checkbox" ></td>
						      <td>&#x1f5d1</td>
						      <td></td>
						    </tr>
						</tbody>
						<tbody class="align-items-center">
						    <tr>
						      <td><input type="checkbox" ></td>
						      <td>&#x1f5d1</td>
						      <td></td>
						    </tr>
						</tbody>
					</table>
      		</div>
      	</div>
      </div>
      <div class="modal-footer justify-content-around">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary"  data-dismiss="modal">Guardar Alterações</button>
      </div>
    </div>
  </div>
</div>














<div class="modal fade" id="ModalConfirmação" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirmar Associação</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      	<div class="container">
      		<div class="row">
      			<h3>Pretende associar o papel</h3>
      		</div>
      		<div class="row">
      			<p id="papeisPlaceholder"></p>
      		</div>
      		<div class="row">
      			<h3>à(s) atividade(s)</h3>
      		</div>
      		<div class="row">
      			<p id="atividadesPlaceholder"></p>
      		</div>
      	</div>
      </div>
      <div class="modal-footer justify-content-around">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">Confirmar associação</button>
      </div>
    </div>
    </div>
</div>


<script>
	var numAtividades=0;
	var atividades=[];
	document.getElementById("next").disabled = true;;
	Storage.prototype.setObj = function(key, obj) {
	    return this.setItem(key, JSON.stringify(obj));
	}
	Storage.prototype.getObj = function(key) {
	    return JSON.parse(this.getItem(key)).join("\n");
	}
	function atividadesGridClicked(id){
		//alert("a entrar");
		var elem=document.getElementById(id);
			if(elem.hasAttribute("class","bg-primary"))
			{
				elem.removeAttribute("class","bg-primary");
				--numAtividades;
				index=atividades.indexOf(elem.getElementsByTagName("td")[2].textContent);
				atividades[index]=null;
			}else{
				elem.setAttribute("class", "bg-primary");
				atividades[numAtividades++]=elem.getElementsByTagName("td")[2].textContent;
			}

			if(numAtividades>0)
				document.getElementById("next").disabled = false;
			else
				document.getElementById("next").disabled = true;
	}


	function nextPage(){
		localStorage.setObj('atividades', atividades);
		//alert(atividades.join("\n"));
	}
			
	function getPapeis(){
			return localStorage.getObj('papeis');
	}
	function getAtividades(){
		return localStorage.getObj('atividades');
	}

	$('#ModalConfirmação').on('show.bs.modal', function (e) {
		document.getElementById("papeisPlaceholder").textContent=getPapeis();
		document.getElementById("atividadesPlaceholder").textContent=getAtividades()	;

	});
	


		
</script>
</html>